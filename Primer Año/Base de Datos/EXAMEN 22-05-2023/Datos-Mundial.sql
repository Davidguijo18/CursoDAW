ALTER SESSION SET NLS_DATE_FORMAT='DD/MM/YYYY';
SET LINESIZE 150
SET PAGESIZE 50
SET SERVEROUTPUT ON

REM *************** BORRADO DE TABLAS ********

DROP TABLE SELECCIONES 	CASCADE CONSTRAINTS;
DROP TABLE PARTIDOS 	CASCADE CONSTRAINTS;
DROP TABLE ESTADIOS 	CASCADE CONSTRAINTS;
DROP TABLE CRUCES 	CASCADE CONSTRAINTS;
PURGE recyclebin;
REM *************** CREACION DE LAS TABLAS*******************************************************

CREATE TABLE SELECCIONES (
  COD_SE		NUMBER(2)	PRIMARY KEY,
  NOMBRE_SE		VARCHAR2(15),
  GRUPO_SE		CHAR(1),
  PUNTOS_SE		NUMBER(2) DEFAULT 0,
  GOLESFAVOR_SE	NUMBER(2) DEFAULT 0,
  GOLESCONTR_SE	NUMBER(2) DEFAULT 0
);

CREATE TABLE ESTADIOS (
  COD_ES			NUMBER(2)	PRIMARY KEY,
  NOMBRE_ES			VARCHAR2(25),
  CIUDAD_ES			VARCHAR2(15),
  ESPECTADORES_ES 	NUMBER(5)
);

CREATE TABLE PARTIDOS (
  LOCAL_PA		NUMBER(2),
  VISITANTE_PA	NUMBER(2),
  GOLESLOC_PA	NUMBER(2)	DEFAULT 0,
  GOLESVIS_PA	NUMBER(2)	DEFAULT 0,
  ESTADIO_PA	NUMBER(2),
  FECHA_PA		DATE,
  FASE_PA		VARCHAR2(10) DEFAULT 'GRUPOS',
  ESTADO_PA		VARCHAR2(15) DEFAULT 'SIN COMENZAR',
  CONSTRAINT PK_PARTIDOS PRIMARY KEY (LOCAL_PA, VISITANTE_PA, FASE_PA),
  CONSTRAINT FK1_PARTIDOS FOREIGN KEY (LOCAL_PA) REFERENCES SELECCIONES,
  CONSTRAINT FK2_PARTIDOS FOREIGN KEY (VISITANTE_PA) REFERENCES SELECCIONES,
  CONSTRAINT FK3_PARTIDOS FOREIGN KEY (ESTADIO_PA) REFERENCES ESTADIOS,
  CONSTRAINT CH_ESTADO_PA CHECK (ESTADO_PA IN ('EN JUEGO','TERMINADO','SIN COMENZAR')),
  CONSTRAINT CH_FASE_PA CHECK (FASE_PA IN ('GRUPOS','OCTAVOS','CUARTOS','SEMIFINAL','FINAL'))
);

CREATE TABLE CRUCES (
  GRUPO_1			CHAR(1),
  GRUPO_2			CHAR(1),
  CONSTRAINT PK_CRUCES PRIMARY KEY (GRUPO_1, GRUPO_2)
);

REM *************** INSERCIÓN DE DATOS EN LAS TABLAS*********************************************

REM ********** TABLA SELECCIONES ********************************************************************

INSERT INTO SELECCIONES VALUES ( 1, 'RUSIA'       , 'A', 0, 0, 0);
INSERT INTO SELECCIONES VALUES ( 2, 'URUGUAY'     , 'A', 0, 0, 0);
INSERT INTO SELECCIONES VALUES ( 3, 'EGIPTO'      , 'A', 0, 0, 0);
INSERT INTO SELECCIONES VALUES ( 4, 'ARABIA SAUDI', 'A', 0, 0, 0);
INSERT INTO SELECCIONES VALUES ( 5, 'IRAN'     	  , 'B', 0, 0, 0);
INSERT INTO SELECCIONES VALUES ( 6, 'PORTUGAL'    , 'B', 0, 0, 0);
INSERT INTO SELECCIONES VALUES ( 7, 'ESPA'||CHR(49829)||'A'      , 'B', 0, 0, 0);
INSERT INTO SELECCIONES VALUES ( 8, 'MARRUECOS'   , 'B', 0, 0, 0);
INSERT INTO SELECCIONES VALUES ( 9, 'FRANCIA'     , 'C', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (10, 'DINAMARCA'   , 'C', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (11, 'AUSTRALIA'   , 'C', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (12, 'PERU'        , 'C', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (13, 'CROACIA'     , 'D', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (14, 'ISLANDIA'    , 'D', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (15, 'ARGENTINA'   , 'D', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (16, 'NIGERIA'     , 'D', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (17, 'SERBIA'      , 'E', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (18, 'BRASIL'      , 'E', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (19, 'SUIZA'       , 'E', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (20, 'COSTA RICA'  , 'E', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (21, 'MEXICO'      , 'F', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (22, 'SUECIA'      , 'F', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (23, 'CORA DEL SUR', 'F', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (24, 'ALEMANIA'    , 'F', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (25, 'BELGICA'     , 'G', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (26, 'PANAMA'      , 'G', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (27, 'TUNEZ'       , 'G', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (28, 'INGLATERRA'  , 'G', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (29, 'POLONIA'     , 'H', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (30, 'SENEGAL'     , 'H', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (31, 'COLOMBIA'    , 'H', 0, 0, 0);
INSERT INTO SELECCIONES VALUES (32, 'JAPON'       , 'H', 0, 0, 0);
COMMIT;

REM ********** TABLA ESTADIOS ********************************************************************

INSERT INTO ESTADIOS VALUES ( 1, 'Rostov Arena'            , 'Rostov'         , 43702);
INSERT INTO ESTADIOS VALUES ( 2, 'Spartak Stadium'         , 'Moscu'          , 45000);
INSERT INTO ESTADIOS VALUES ( 3, 'Luzhniki Stadium'        , 'Moscu'          , 81500);
INSERT INTO ESTADIOS VALUES ( 4, 'Nizhny Novgorod Stadium' , 'Nizhny Novgorod', 55300);
INSERT INTO ESTADIOS VALUES ( 5, 'Samara Arena'	           , 'Samara'         , 45000);
INSERT INTO ESTADIOS VALUES ( 6, 'Kazan Arena'	           , 'Kazan'          , 45500);
INSERT INTO ESTADIOS VALUES ( 7, 'Saint Petersburg Stadium', 'San Petersburgo', 70000);
INSERT INTO ESTADIOS VALUES ( 8, 'Mordovia Arena'	       , 'Saransk'        , 45100);
INSERT INTO ESTADIOS VALUES ( 9, 'Ekaterinburg Arena'	   , 'Ekaterinburgo ' , 42500);
INSERT INTO ESTADIOS VALUES (10, 'Kaliningrad Stadium'	   , 'Kaliningrado '  , 45015);
INSERT INTO ESTADIOS VALUES (11, 'Volgograd Arena'	       , 'Volgogrado '    , 45500);
INSERT INTO ESTADIOS VALUES (12, 'Fisht Stadium'	       , 'Sochi'          , 48000);


REM ********** TABLA PARTIDOS ********************************************************************
---------------------- GRUPO A ------------------------------------------------------
INSERT INTO PARTIDOS VALUES ( 1, 2, 1, 2, 1, SYSDATE - 30, 'GRUPOS', 'TERMINADO');
INSERT INTO PARTIDOS VALUES ( 3, 4, 0, 0, 2, SYSDATE - 30, 'GRUPOS', 'TERMINADO');
INSERT INTO PARTIDOS VALUES ( 1, 3, 3, 1, 3, SYSDATE - 25, 'GRUPOS', 'TERMINADO');
INSERT INTO PARTIDOS VALUES ( 2, 4, 2, 4, 4, SYSDATE - 25, 'GRUPOS', 'TERMINADO');
INSERT INTO PARTIDOS VALUES ( 1, 4, 4, 0, 5, SYSDATE - 20, 'GRUPOS', 'TERMINADO');
INSERT INTO PARTIDOS VALUES ( 2, 3, 0, 3, 6, SYSDATE - 20, 'GRUPOS', 'TERMINADO');
---------------------- GRUPO B ------------------------------------------------------
INSERT INTO PARTIDOS VALUES ( 5, 6, 0, 1, 7, SYSDATE - 30, 'GRUPOS', 'TERMINADO');
INSERT INTO PARTIDOS VALUES ( 7, 8, 2, 1, 8, SYSDATE - 30, 'GRUPOS', 'TERMINADO');
INSERT INTO PARTIDOS VALUES ( 5, 7, 0, 3, 9, SYSDATE - 25, 'GRUPOS', 'TERMINADO');
INSERT INTO PARTIDOS VALUES ( 6, 8, 3, 0,10, SYSDATE - 25, 'GRUPOS', 'TERMINADO');
INSERT INTO PARTIDOS VALUES ( 5, 8, 1, 0,11, SYSDATE - 20, 'GRUPOS', 'TERMINADO');
INSERT INTO PARTIDOS VALUES ( 6, 7, 3, 3,12, SYSDATE - 20, 'GRUPOS', 'TERMINADO');
---------------------- GRUPO C ------------------------------------------------------
INSERT INTO PARTIDOS VALUES ( 9,10, 5, 0, 1, SYSDATE - 29, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (11,12, 1, 0, 2, SYSDATE - 29, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES ( 9,11, 5, 6, 3, SYSDATE - 24, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (10,12, 0, 0, 4, SYSDATE - 24, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES ( 9,12, 6, 0, 5, SYSDATE - 19, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (10,11, 1, 2, 6, SYSDATE - 19, 'GRUPOS', 'EN JUEGO');
---------------------- GRUPO D ------------------------------------------------------                                                
INSERT INTO PARTIDOS VALUES (13,14, 1, 3, 7, SYSDATE - 29, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (15,16, 5, 5, 8, SYSDATE - 29, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (13,15, 2, 2, 9, SYSDATE - 24, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (14,16, 4, 0,10, SYSDATE - 24, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (13,16, 0, 1,11, SYSDATE - 19, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (14,15, 3, 2,12, SYSDATE - 19, 'GRUPOS', 'EN JUEGO');
---------------------- GRUPO E ------------------------------------------------------
INSERT INTO PARTIDOS VALUES (17,18, 2, 0, 1, SYSDATE - 28, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (19,20, 0, 3, 2, SYSDATE - 28, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (17,19, 1, 1, 3, SYSDATE - 23, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (18,20, 0, 2, 4, SYSDATE - 23, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (17,20, 5, 4, 5, SYSDATE - 18, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (18,19, 0, 1, 6, SYSDATE - 18, 'GRUPOS', 'EN JUEGO');
---------------------- GRUPO F ------------------------------------------------------
INSERT INTO PARTIDOS VALUES (21,22, 0, 5, 7, SYSDATE - 28, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (23,24, 3, 1, 8, SYSDATE - 28, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (21,23, 1, 5, 9, SYSDATE - 23, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (22,24, 2, 0,10, SYSDATE - 23, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (21,24, 4, 6,11, SYSDATE - 18, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (22,23, 1, 1,12, SYSDATE - 18, 'GRUPOS', 'EN JUEGO');
---------------------- GRUPO G ------------------------------------------------------
INSERT INTO PARTIDOS VALUES (25,26, 1, 2, 1, SYSDATE - 27, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (27,28, 1, 0, 2, SYSDATE - 27, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (25,27, 3, 1, 3, SYSDATE - 22, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (26,28, 0, 0, 4, SYSDATE - 22, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (25,28, 0, 5, 5, SYSDATE - 17, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (26,27, 3, 0, 6, SYSDATE - 17, 'GRUPOS', 'EN JUEGO');
---------------------- GRUPO H ------------------------------------------------------
INSERT INTO PARTIDOS VALUES (29,30, 0, 1, 7, SYSDATE - 27, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (31,32, 0, 0, 8, SYSDATE - 27, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (29,31, 6, 3, 9, SYSDATE - 22, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (30,32, 0, 2,10, SYSDATE - 22, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (29,32, 0, 4,11, SYSDATE - 17, 'GRUPOS', 'EN JUEGO');
INSERT INTO PARTIDOS VALUES (30,31, 2, 0,12, SYSDATE - 17, 'GRUPOS', 'EN JUEGO');

REM ********** TABLA CRUCES ********************************************************************
INSERT INTO CRUCES VALUES ( 'A', 'H');
INSERT INTO CRUCES VALUES ( 'B', 'G');
INSERT INTO CRUCES VALUES ( 'C', 'F');
INSERT INTO CRUCES VALUES ( 'D', 'E');
INSERT INTO CRUCES VALUES ( 'E', 'A');
INSERT INTO CRUCES VALUES ( 'F', 'B');
INSERT INTO CRUCES VALUES ( 'G', 'C');
INSERT INTO CRUCES VALUES ( 'H', 'D');

COMMIT;
REM ****** DATOS **************
SELECT * FROM SELECCIONES;
SELECT * FROM ESTADIOS;
SELECT * FROM CRUCES;
SELECT * FROM PARTIDOS ORDER BY FECHA_PA;
