<!DOCTYPE html>
<html>
  <head>   
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
    <title>Ejemplo Web Storage</title>
		<style>
		div{
			border: 2px solid blue;
			margin: 2em;
			padding: 1em;
		}
		</style>
    <script type="text/javascript">

	if(!localStorage["nvisitas"])
		localStorage["nvisitas"] = 0;

	localStorage["nvisitas"]++;

      window.onload =function(){
		document.getElementById("btGuardar").onclick = guardar;
		document.getElementById("btMostrar").onclick = mostrar;
		document.getElementById("btContenido").onclick = contenido;
		document.getElementById("btBorrarDato").onclick = borrarDato;
		document.getElementById("btBorrarTodo").onclick = borrarTodo;
	  }

	  function guardar(){
		if(!localStorage["etiqueta"])
			localStorage["etiqueta"] = "";

		if(!localStorage["dato"])
			localStorage["dato"] = "";	

		localStorage["etiqueta"] = document.getElementById("etiqueta").value;
		localStorage["dato"] = document.getElementById("dato").value;
	  }

	  function mostrar(){
		document.getElementById("sal").innerHTML = "Nombre: " + localStorage['etiqueta'] +  "<br>Dato: " + localStorage['dato'];
		document.getElementById("nvisitas").innerHTML = "Numero de visitas: " + localStorage['nvisitas'];
	  }

	  function contenido(){
		var contenido = document.getElementById("contenido");
		contenido.innerHTML = "";
		
		for(i in localStorage){
			if(localStorage.getItem(i) != null)
			contenido.innerHTML = contenido.innerHTML + localStorage.getItem(i) + "<br>"; 
		}
	  }

	  function borrarDato(){
		localStorage.removeItem('dato');
	  }

	  function borrarTodo(){
		localStorage.clear();
	  }
         
    </script>
  </head>
  
  <body>

    <h3>Esto es un ejermplo de Web Storage</h3>
    
    <label>Nombre: </label>
		<input type="text" name="etiqueta" id="etiqueta">
		<br><br>
		<label>Dato: </label>
		<input type="text" name="dato" id="dato">
    <br /><br />
		
		<hr>
		<br><br>
    <button id="btGuardar">Guardar Dato</button> 
    <button id="btMostrar">Mostrar Dato</button> 
    <button id="btContenido">Contenido del Web Storage</button> 
		
		<button id="btBorrarDato">Borrar Dato</button> 
		<button id="btBorrarTodo">Borrar Todo</button> 
		
    <p>
    	<div id="sal">
    		Aquí ponemos el dato leido del localStorage
    	</div>
    	<div id="nvisitas">
    		Aquí se muestra el número de visitas
    	</div>
    </p>
    <p>
    <div id="contenido">
    	Contenido de todo el Web Storage
    </div>
    </p>
    
  </body>
  
</html>
